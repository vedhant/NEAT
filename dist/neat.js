parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"B7pA":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(n,i,o,r,a){e(this,t),this.inNode=n,this.outNode=i,this.weight=o,this.enabled=r,this.innovation=a}return n(t,[{key:"copy",value:function(){return new t(this.inNode,this.outNode,this.weight,this.enabled,this.innovation)}}]),t}();exports.default=i;
},{}],"lTk1":[function(require,module,exports) {
"use strict";function r(r,t){return Math.floor(Math.random()*(t-r+1))+r}function t(r,t){return Math.random()*(t-r)+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.randInt=r,exports.rand=t;
},{}],"KUc5":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={INPUT:0,HIDDEN:1,OUTPUT:2},i=function(){function t(n,r){e(this,t),this.type=n,this.id=r}return n(t,[{key:"copy",value:function(){return new t(this.type,this.id)}}]),t}();exports.default=i,Object.defineProperty(i,"TYPE",{value:r,writable:!1});
},{}],"xuC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={RandomWeightRange:4,probGenomeMutateConnectionWeights:.8,probEachWeightUniformPerturb:.9,c1:1,c2:1,c3:.4,compatibilityThreshold:13,addConnectionRate:.5,addNodeRate:.5},t=e;exports.default=t;
},{}],"xE0e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(require("./connection_gene")),t=require("./helpers"),e=i(require("./node_gene")),o=i(require("./parameters"));function i(n){return n&&n.__esModule?n:{default:n}}function a(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function s(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,t,e){return t&&s(n.prototype,t),e&&s(n,e),n}var c=function(){function i(){a(this,i),this.connections=[],this.nodes=[],this.fitness=0}return r(i,[{key:"addConnectionMutation",value:function(i){var a=this.nodes[(0,t.randInt)(0,this.nodes.length-1)],s=this.nodes[(0,t.randInt)(0,this.nodes.length-1)],r=(0,t.rand)(-o.default.RandomWeightRange/2,o.default.RandomWeightRange/2),c=!1;a.type===e.default.TYPE.HIDDEN&&s.type===e.default.TYPE.INPUT?c=!0:a.type===e.default.TYPE.OUTPUT&&s.type===e.default.TYPE.HIDDEN?c=!0:a.type===e.default.TYPE.OUTPUT&&s.type===e.default.TYPE.INPUT&&(c=!0);var d=!1;a.type===e.default.TYPE.INPUT&&s.type===e.default.TYPE.INPUT?d=!0:a.type===e.default.TYPE.OUTPUT&&s.type===e.default.TYPE.OUTPUT?d=!0:a.id===s.id&&(d=!0);for(var u=!1,h=0;h<this.connections.length;++h){if(this.connections[h].inNode===a.id&&this.connections[h].outNode===s.id){u=!0;break}if(this.connections[h].inNode===s.id&&this.connections[h].outNode===a.id){u=!0;break}}if(!u&&!d){var f=new n.default(c?s.id:a.id,c?a.id:s.id,r,!0,i.getInnovation());this.connections.push(f)}}},{key:"addNodeMutation",value:function(o,i){var a=this.connections[(0,t.randInt)(0,this.connections.length-1)],s=this.getNodeById(a.inNode),r=this.getNodeById(a.outNode);a.enabled=!1;var c=new e.default(e.default.TYPE.HIDDEN,o.getInnovation()),d=new n.default(s.id,c.id,1,!0,i.getInnovation()),u=new n.default(c.id,r.id,a.weight,!0,i.getInnovation());this.nodes.push(c),this.connections.push(d),this.connections.push(u)}},{key:"mutateConnectionWeights",value:function(){for(var n=0;n<this.connections.length;++n)(0,t.rand)(0,1)<o.default.probEachWeightUniformPerturb?this.connections[n].weight*=(0,t.rand)(-o.default.RandomWeightRange/2,o.default.RandomWeightRange/2):this.connections[n].weight=(0,t.rand)(-o.default.RandomWeightRange/2,o.default.RandomWeightRange/2)}},{key:"getNodeById",value:function(n){var t=this.nodes.find(function(t){return t.id===n});return void 0===t?null:t}},{key:"getConnection",value:function(n){var t=this.connections.find(function(t){return t.innovation===n});return void 0===t?null:t}},{key:"copy",value:function(){for(var n=[],t=[],e=0;e<this.connections.length;++e)n.push(this.connections[e].copy());for(var o=0;o<this.nodes.length;++o)t.push(this.nodes[o].copy());var a=new i;return a.connections=n,a.nodes=t,a.fitness=this.fitness,a}}]),i}();exports.default=c,c.crossover=function(n,t){for(var e=new c,o=0;o<n.nodes.length;++o){var i=t.getNodeById(n.nodes[o].id);if(null!==i){var a=Math.random()>=.5?n.nodes[o].copy():i.copy();e.nodes.push(a)}else{var s=n.nodes[o].copy();e.nodes.push(s)}}for(var r=0;r<n.connections.length;++r){var d=t.getConnection(n.connections[r].innovation),u=void 0;null!==d?(u=Math.random()>=.5?n.connections[r].copy():d.copy(),e.connections.push(u)):(u=n.connections[r].copy(),e.connections.push(u))}return e},c.compatibilityDistance=function(n,t){var e=Math.max(n.nodes.length+n.connections.length,t.nodes.length+t.connections.length),i=c.getGenesCompatibility(n,t);return o.default.c1*i.excess/e+o.default.c2*i.disjoint/e+o.default.c3*i.avgWeightDiff},c.getGenesCompatibility=function(n,t){for(var e=0,o=0,i=0,a=0,s=n.nodes.map(function(n){return n.id}).sort(function(n,t){return n<t?-1:1}),r=t.nodes.map(function(n){return n.id}).sort(function(n,t){return n<t?-1:1}),c=s.length-1,d=r.length-1;c>=0&&d>=0;)s[c]===r[d]?(++e,--c,--d):s[c]<r[d]?(r[d]>s[s.length-1]?++a:++i,--d):(s[c]>r[r.length-1]?++a:++i,--c);var u=0,h=n.connections.map(function(n){return{innovation:n.innovation,weight:n.weight}}).sort(function(n,t){return n.innovation<t.innovation?-1:1}),f=t.connections.map(function(n){return{innovation:n.innovation,weight:n.weight}}).sort(function(n,t){return n.innovation<t.innovation?-1:1});for(c=h.length-1,d=f.length-1;c>=0&&d>=0;)h[c].innovation===f[d].innovation?(++o,u+=Math.abs(h[c].weight-f[d].weight),--c,--d):h[c].innovation<f[d].innovation?(f[d].innovation>h[h.length-1].innovation?++a:++i,--d):(h[c].innovation>f[f.length-1].innovation?++a:++i,--c);return{matching:e+o,disjoint:i,excess:a,avgWeightDiff:u/o}};
},{"./connection_gene":"B7pA","./helpers":"lTk1","./node_gene":"KUc5","./parameters":"xuC4"}],"VVA4":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function e(){t(this,e);var n=-1;this.getInnovation=function(){return++n}};exports.default=e;
},{}],"XZ32":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./helpers");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var r=function(){function s(e){t(this,s),this.representative=e,this.members=[e],this.totalAdjustedFitness=0}return n(s,[{key:"addAdjustedFitness",value:function(e){this.totalAdjustedFitness+=e}},{key:"reset",value:function(){this.representative=this.members[(0,e.randInt)(0,this.members.length-1)],this.members.splice(0,this.members.length),this.totalAdjustedFitness=0}}]),s}();exports.default=r;
},{"./helpers":"lTk1"}],"pLPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./species")),t=n(require("./genome")),s=n(require("./parameters"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return a(e)||r(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,s){return t&&c(e.prototype,t),s&&c(e,s),e}var p=function(){function n(e,t,s,i){if(h(this,n),this.constructor===n)throw new Error("Evaluator cannot be instantiated");this.populationSize=t,this.genomes=[];for(var o=0;o<t;++o)this.genomes.push(e.copy());this.nextGenGenomes=[],this.speciesMap=[],this.species=[],this.connectionInnovation=s,this.nodeInnovation=i,this.highestScore=0,this.fittestGenome}return u(n,[{key:"evaluate",value:function(){for(var n=0;n<this.species.length;++n)this.species[n].reset();this.speciesMap.splice(0,this.speciesMap.length),this.nextGenGenomes=[],this.fittestGenome=null,this.highestScore=0;for(var o=0;o<this.genomes.length;++o){for(var r=!1,a=0;a<this.species.length;++a)if(t.default.compatibilityDistance(this.genomes[o],this.species[a].representative)<s.default.compatibilityThreshold){this.species[a].members.push(this.genomes[o]),this.speciesMap.push({genome:this.genomes[o],species:this.species[a]}),r=!0;break}if(!r){var h=new e.default(this.genomes[o]);this.species.push(h),this.speciesMap.push({genome:this.genomes[o],species:h})}}for(var c=this.species.length-1;c>=0;--c)0===this.species[c].members.length&&this.species.splice(c,1);for(var u=0;u<this.speciesMap.length;++u){var p=this.speciesMap[u].genome,m=this.speciesMap[u].species,d=this.evaluateGenome(p),l=d/m.members.length;m.addAdjustedFitness(l),p.fitness=l,d>this.highestScore&&(this.highestScore=d,this.fittestGenome=p)}for(var f=0;f<this.species.length;++f){this.species[f].members.sort(function(e,t){return e.fitness>t.fitness?-1:1});var g=this.species[f].members[0].copy();this.nextGenGenomes.push(g)}for(;this.nextGenGenomes.length<this.populationSize;){var v=this.getRandomSpeciesBiasedAdjustedFitness(),b=this.getRandomGenomeBiasedAdjustedFitness(v),G=this.getRandomGenomeBiasedAdjustedFitness(v),y=void 0;y=b.fitness>G.fitness?t.default.crossover(b,G):t.default.crossover(G,b),Math.random()<s.default.probGenomeMutateConnectionWeights&&y.mutateConnectionWeights(),Math.random()<s.default.addConnectionRate&&y.addConnectionMutation(this.connectionInnovation),Math.random()<s.default.addNodeRate&&y.addNodeMutation(this.nodeInnovation,this.connectionInnovation),this.nextGenGenomes.push(y)}this.genomes=i(this.nextGenGenomes)}},{key:"getRandomSpeciesBiasedAdjustedFitness",value:function(){for(var e=0,t=0;t<this.species.length;++t)e+=this.species[t].totalAdjustedFitness;for(var s=Math.random()*e,n=0,i=0;i<this.species.length;++i)if((n+=this.species[i].totalAdjustedFitness)>=s)return this.species[i];throw new Error("Couldn't find a species")}},{key:"getRandomGenomeBiasedAdjustedFitness",value:function(e){for(var t=0,s=0;s<e.members.length;++s)t+=e.members[s].fitness;for(var n=Math.random()*t,i=0,o=0;o<e.members.length;++o)if((i+=e.members[o].fitness)>=n)return e.members[o];throw new Error("Couldn't find a genome")}},{key:"evaluateGenome",value:function(e){throw new Error("Method evaluateGenome() must be implemented")}}]),n}();exports.default=p;
},{"./species":"XZ32","./genome":"xE0e","./parameters":"xuC4"}],"gyHp":[function(require,module,exports) {
"use strict";var e=i(require("./genome")),n=i(require("./innovation_generator")),o=i(require("./node_gene")),r=i(require("./connection_gene")),t=i(require("./evaluator"));function i(e){return e&&e.__esModule?e:{default:e}}window.Genome=e.default,window.NodeGene=o.default,window.ConnectionGene=r.default,window.InnovationGenerator=n.default,window.Evaluator=t.default;
},{"./genome":"xE0e","./innovation_generator":"VVA4","./node_gene":"KUc5","./connection_gene":"B7pA","./evaluator":"pLPt"}]},{},["gyHp"], null)
//# sourceMappingURL=/neat.js.map